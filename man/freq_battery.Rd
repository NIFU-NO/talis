% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/freq_battery.R
\name{freq_battery}
\alias{freq_battery}
\title{Frekvenstabell for spørsmålsbatterier}
\usage{
freq_battery(
  data,
  svy,
  battery_prefix,
  fast = FALSE,
  as_gt = FALSE,
  plot = FALSE,
  bar_labels = FALSE,
  decimals = 1,
  local = "no",
  return_data = c("none", "tabell", "rrepest")
)
}
\arguments{
\item{data}{Datasett med relevante variabler og vektinformasjon.}

\item{svy}{Survey-designet: \code{"TALISEC_LEADER"} eller \code{"TALISEC_STAFF"}.}

\item{battery_prefix}{Felles prefiks for variablene i spørsmålsbatteriet (f.eks. \code{"q_29"}).}

\item{fast}{Bruk raskere metode med færre vekter? (default: \code{FALSE})}

\item{as_gt}{Returner som \code{gt}-tabell? (default: \code{FALSE})}

\item{plot}{Returner som \code{ggplot2}-figur? (default: \code{FALSE})}

\item{bar_labels}{Legg til prosentetiketter i stolpene i figuren? (default: \code{FALSE})}

\item{decimals}{Antall desimaler i figurer og tabeller. Brukes i både \code{ggplot} og \code{gt}. Default: \code{1}.}

\item{local}{Språklig format for tall. \code{"no"} (default) gir norsk tegnsetting (komma som desimal og mellomrom som tusenskillere), \code{"en"} gir engelsk format (punktum som desimal). Brukes i både \code{gt} og \code{ggplot}.}

\item{return_data}{Hva skal returneres? \code{"none"} (default), \code{"tabell"} (en bred \code{tibble}), eller \code{"rrepest"} (liste med \code{Rrepest}-resultater per variabel)}
}
\value{
Én av følgende, avhengig av valg:
\itemize{
\item \code{gt}-tabell (hvis \code{as_gt = TRUE})
\item \code{ggplot}-objekt (hvis \code{plot = TRUE})
\item bred \code{tibble} med andeler (hvis \code{return_data = "tabell"})
\item liste med \code{Rrepest}-resultater (hvis \code{return_data = "rrepest"})
\item usynlig printet tabell (default)
}
}
\description{
Lager en samlet frekvenstabell for alle variabler som starter med et gitt prefiks – typisk brukt for batterier av likeformede spørsmål.
Tabellene lages ved hjelp av \code{Rrepest} og kan returneres som \code{gt}-tabell, \code{ggplot2}-figur eller bred \code{tibble}.
}
\details{
Prefiks hentes vanligvis fra variabelnavn som \code{q_29}, og funksjonen forsøker å hente batterinavn fra variablenes \code{label}.
}
\examples{
\dontrun{
# Enkel frekvenstabell for spørsmål med prefix ss2g15
freq_battery(data = data_02_ansatt, svy = "TALISEC_STAFF", battery_prefix = "ss2g15")

# Returner som figur
freq_battery(data = data_02_ansatt, svy = "TALISEC_STAFF", battery_prefix = "ss2g15", plot = TRUE)

# Returner som bred tabell
tabell <- freq_battery(data = data_02_ansatt, svy = "TALISEC_STAFF",
                       battery_prefix = "ss2g15", return_data = "tabell")
}
}
